#实践说明
官网文档：http://www.evosuite.org/documentation/commandline/
本文主要实践命令行（非maven项目方式），顺带说下maven项目使用方法

##Mac+idea+evoSuite插件方式
1. idea 安装evoSuite插件（我这里只下载到了1.0.3版本的插件）
Preference->plugin中：

2. 在项目中选取.java文件或者包右键选择“Run EvoSuite”
3. 如果是maven项目，还需要配置maven配置文件，项目最外层的pom.xml中增加

    ```
      <pluginManagement>
      <plugins>
         <plugin>
            <groupId>org.evosuite.plugins</groupId>
            <artifactId>evosuite-maven-plugin</artifactId>
            <version>${evosuiteVersion}</version>
            <executions><execution>
               <goals> <goal> prepare </goal> </goals>
               <phase> process-test-classes </phase>
            </execution></executions>
        </plugin>
      </plugins>
      </pluginManagement
    ```
   
    其中${evosuiteVersion} 改成具体的版本号即可（我这里插件是1.0.3，实际用的和下载的包是1.0.6）
     
   ```
     <dependency>
       <groupId>org.evosuite</groupId>
       <artifactId>evosuite-standalone-runtime</artifactId>
       <version>${evosuiteVersion}</version>
       <scope>test</scope>
     </dependency>
      ```

我这里没有用java agent所以没有其他配置

4. 直接右键 Run Evosuite,
选取一个最简单的文件java源文件：

```

public class CommandController {

    @ApiOperation("test")
    public void test(String cmd,String dir){
        try {
            CommandUtil.execCommand(cmd,dir);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```


实际生成的测试用例文件中只有一个异常情况下的测试用例：

```
/*
 * This file was automatically generated by EvoSuite
 * Thu Nov 07 09:52:38 GMT 2019
 */


import org.junit.Test;
import static org.junit.Assert.*;
import org.evosuite.runtime.EvoRunner;
import org.evosuite.runtime.EvoRunnerParameters;
import org.junit.runner.RunWith;

@RunWith(EvoRunner.class) @EvoRunnerParameters(mockJVMNonDeterminism = true, useVFS = true, useVNET = true, resetStaticState = true, separateClassLoader = true, useJEE = true) 
public class CommandController_ESTest extends CommandController_ESTest_scaffolding {

  @Test(timeout = 4000)
  public void test0()  throws Throwable  {
      CommandController commandController0 = new CommandController();
      commandController0.test("", "m6X@\"Ku%k3:");
  }
}
```

还有一个junit框架文件,这里不贴了；
另外，用其他带更多业务逻辑的java文件生成测试用例时各种包找不到。。。决定找个简单的点的例子；



##Mac命令行方式（或者非maven项目）
1.  找个简单的非maven项目，如本示例代码(本来是想用两整数之和演示，所以项目命名为Sum了，最后又加了两数相除，不纠结名字了)
确认项目编译、运行正确；

执行命令：
```
 java -jar /Users/****/Documents/tools/evosuite-1.0.6.jar -projectCP ./ -class Sum

```
2. 遇到的问题
* 缺少的java包（如junit等）
解决直接通过 src文件夹
如运行的时候报错：
```
java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing
```
https://blog.csdn.net/u011954243/article/details/77962329 直接下载hamcrest jar包并引入到工程中；
* 直接运行成功时，无任何输出：

![Image text]

* 如想看下输出（test5），  在测试用例中加了控制台输出：

* 如果想运行失败（test1），可以把预期结果改为错误的：

* 该工具为什么叫做在保证代码测试覆盖率的前提下生成的测试用例，看下分析和生成过程


